# AI_REPORT

 **μ„¤κ³„ κΈ°λ° μ‚¬κ³  + Claude Code Skill μ‚¬μ© + Codex 2μ°¨ κ²€μ¦**μ„ κ²°ν•©ν•΄, <br>
 μΌκ΄€λ μμ‚¬κ²°μ • λ¬Έμ„λ¥Ό λ°”νƒ•μΌλ΅ κ³ ν¨μ¨ κ°λ° μ›ν¬ν”λ΅μ°λ¥Ό κµ¬μ¶•ν•μ€μµλ‹λ‹¤.

1) μ„¤κ³„ κ΄€μ 
2) λ¬Έμ  κ³ λ―Όκ³Ό ν•΄κ²° κ΄€μ 
3) μƒμ‚°μ„± ν–¥μƒ κ΄€μ 

μ—μ„ μ •λ¦¬ν•μ€μµλ‹λ‹¤.

---

# 1. μ„¤κ³„ κ΄€μ 

## 1.1. Custom Skills & Tooling Overview

### π§© Skill κµ¬μ„±

μ—¬λ¬ μ¤ν”μ†μ¤μ—μ„ μ¤ν‚¬μ„ μ΅°ν•©Β·κ°μ„ ν•μ—¬ **ν”„λ΅μ νΈ μ „μ© AI κ°λ° ν™κ²½**μ„ κµ¬μ„±ν–μµλ‹λ‹¤.

| κµ¬λ¶„    | μ΄λ¦„               | μ„¤λ…                                   |
| ----- | ---------------- | ------------------------------------ |
| Skill | clarify          | μ†ν¬λΌν…μ¤μ‹ λ¬Έλ‹µμΌλ΅ λ¨νΈν• μ•„μ΄λ””μ–΄λ¥Ό κµ¬μ²΄μ μΈ μ”κµ¬μ‚¬ν•­μΌλ΅ λ³€ν™ |
| Skill | ccpp:plan        | Plan Modeμ—μ„ κ°λ° κ³„ν μλ¦½                 |
| Skill | ccpp:spec        | SPEC.md μ‘μ„± (μ—”ν‹°ν‹°Β·APIΒ·ν…μ¤νΈ κΈ°μ¤€ λ…μ„Έ)       |
| Skill | ccpp:frontend    | UI/ν”„λ΅ νΈμ—”λ“ μ½”λ“ μƒμ„± μ „μ© μ¤ν‚¬                 |
| Skill | ccpp:handoff     | μ„Έμ… μΆ…λ£ μ‹ HANDOFF.md μλ™ μΈκ³„             |
| Skill | ccpp:nano-banana | μ•± μ•„μ΄μ½ μƒμ„±                             |

* `clarify` μ»¤λ§¨λ“ λ“±λ΅ <br>
  [https://github.com/toy-crane/cc-playbook/blob/main/.claude/commands/clarify.md](https://github.com/toy-crane/cc-playbook/blob/main/.claude/commands/clarify.md)

* Claude Code μ¬μΈμ› μμ‚° (Skill / Subβ€‘Agent / Rule / Hook) <br>
  [https://github.com/jh941213/my-claude-code-asset](https://github.com/jh941213/my-claude-code-asset)



### π”§ Tooling (MCP)

* **Codex MCP Server** <br>
  Claude Codeμ—μ„ Codex CLIλ¥Ό MCP λ„κµ¬λ΅ μ‚¬μ©ν•μ—¬ **κµ¬ν„ ν›„ 2μ°¨ λ…Όλ¦¬ κ²€μ¦ λ° λ™μ‹μ„± ν…μ¤νΈ**μ— ν™μ©

  [https://github.com/tuannvm/codex-mcp-server](https://github.com/tuannvm/codex-mcp-server)

---

## 1.2. Prompt Logging Skill (μλ™ κΈ°λ΅ μ‹μ¤ν…)

> AIμ™€μ μ‚¬κ³  κ³Όμ •μ„ μ›λ¬ΈμΌλ΅ κΈ°λ΅

### κµ¬ν„ λ‚΄μ©

* `LAST_LOG_CURSOR` κΈ°μ μΌλ΅ μ΄ν›„μ λ¨λ“  ν”„λ΅¬ν”„νΈ/μ‘λ‹µμ„ κ°€κ³µ μ—†μ΄ `docs/PROMPT.md`μ— append
* κΈ°λ΅ ν›„ μ»¤μ„λ¥Ό ν„μ¬ μ‹μ μΌλ΅ μλ™ μ—…λ°μ΄νΈ

π‘‰ ν•΄λ‹Ή λ΅μ§μ„ **ν•λ‚μ μ¤ν‚¬λ΅ κµ¬ν„**ν•¨

| κµ¬λ¶„    | μ΄λ¦„      | μ„¤λ…                      |
| ----- |---------|-------------------------|
| Skill | /prompt | μ»¤μ„ μ΄ν›„μ ν”„λ΅¬ν”„νΈ/μ‘λ‹µμ„ μ›λ¬ΈμΌλ΅ κΈ°λ΅ |

---

## 1.3. κ°λ° νλ¦„ (Claude Code κΈ°μ¤€)

### β‘  Plan λ¨λ“ μ‚¬μ© & Spec λ…μ„Έ μ‘μ„±

* Claude Code β†’ **Plan Mode**
* `ccpp:plan`μΌλ΅ μ „μ²΄ κ°λ° κ³„ν μλ¦½
* `ccpp:spec`μΌλ΅ `docs/SPEC.md` μ‘μ„±
* SPECμ„ κΈ°μ¤€μΌλ΅ `CLAUDE.md` κ°±μ‹ 

### β‘΅ κµ¬ν„

* Backend: μ •μ±…Β·νΈλμ­μ…Β·λ™μ‹μ„± μ¤‘μ‹¬ κµ¬ν„
* Frontend: `ccpp:frontend`λ΅ UI μƒμ„±
  β†’ AI νΉμ μ λΉ„ν„μ‹¤μ μΈ UI λ¬Έμ  μµμ†ν™”

### β‘Ά μ„Έμ… μΆ…λ£

* `/ccpp:handoff` μ‹¤ν–‰
* HANDOFF.md μλ™ μƒμ„± λ° μΈκ³„

---

# 2. λ¬Έμ  κ³ λ―Όκ³Ό ν•΄κ²° κ΄€μ 

μ΄ ν”„λ΅μ νΈμ μ΄μΒ·κ΄€λ¦¬ λ΅μ§μ€ **μ‚¬ν›„ μμ™Έ μ²λ¦¬κ°€ μ•„λ‹λΌ, μ‚¬μ „μ— μ„¤κ³„λ μ •μ±… κΈ°λ° λ€μ‘**μ„ λ©ν‘λ΅ ν•©λ‹λ‹¤.
λ¨λ“  λ¬Έμ λ” `μ •ν•©μ„± β†’ λ™μ‹μ„± β†’ UX` κ΄€μ μ—μ„ λ‹¨κ³„μ μΌλ΅ λ¶„ν•΄ν•΄ ν•΄κ²°ν–μµλ‹λ‹¤.


## 2.1 μƒν’ μ‚­μ  μ •μ±… (Hard Delete)

#### λ¬Έμ  μΈμ‹

* μ£Όλ¬Έ μ΄λ ¥μ΄ μλ” μƒν’μ„ μ‚­μ ν•  κ²½μ°

    * μ°Έμ΅° λ¬΄κ²°μ„± λ¶•κ΄΄
    * μ£Όλ¬Έ/μ •μ‚° λ°μ΄ν„° μ‹ λΆ°λ„ ν•λ½

#### ν•΄κ²° μ „λµ

* **λ¬Όλ¦¬μ  μ‚­μ (Hard Delete)** μ±„νƒ
* λ‹¨, **μ‚­μ  κ°€λ¥ μ΅°κ±΄μ„ λ…ν™•ν μ ν•**

#### μ •μ±… μ •μ

| ν•­λ©      | λ‚΄μ©                        |
| ------- | ------------------------- |
| μ‚­μ  λ°©μ‹   | Hard Delete               |
| μ‚¬μ „ μ΅°κ±΄   | ν•΄λ‹Ή μƒν’μΌλ΅ μƒμ„±λ μ£Όλ¬Έμ΄ ν•λ‚λ„ μ—†μ–΄μ•Ό ν•¨ |
| μ£Όλ¬Έ μ΅΄μ¬ μ‹ | μ‚­μ  λ¶κ°€                     |

β†’ Soft Deleteλ΅ μΈν• μ΅°κ±΄ λ¶„κΈ°Β·μΏΌλ¦¬ λ³µμ΅λ„λ¥Ό μ κ±°ν•κ³ , <br>
β†’ β€μ£Όλ¬Έ μ΄λ ¥μ΄ μλ” μƒν’μ€ μ λ€ μ‚­μ λμ§€ μ•λ”λ‹¤β€λ” λ„λ©”μΈ κ·μΉ™μ„ λ…ν™•ν ν•¨

---

## 2.2 μ–΄λ“λ―Ό μ£Όλ¬Έ μ·¨μ† & ν¬μΈνΈ ν™λ¶ μ •μ±…

#### λ¬Έμ  μΈμ‹

* μ£Όλ¬Έ μ·¨μ†λ” **ν¬μΈνΈ μ •μ±…/μ¬κ³  μ •μ±…**μ΄ ν•¨κ» λ³µμ›λμ–΄μ•Ό ν•λ” λ³µμ΅ν• μ‘μ—…μΌλ΅ νλ‹¨

#### μ²λ¦¬ νλ¦„

1. μ£Όλ¬Έ μƒνƒλ¥Ό `CANCELLED`λ΅ λ³€κ²½
2. `OrderPointUsage` μ΅°ν
3. κ° `PointLedger`μ balance λ³µμ›
4. `Product.stock` λ³µμ›
5. ν™λ¶ ν¬μΈνΈ μ¤‘ μ΄λ―Έ λ§λ£λ κ²ƒμ€ λ³µμ›λλ”λΌλ„ μ‚¬μ© λ¶κ°€

#### μ„¤κ³„ ν¬μΈνΈ

| μμ      | λ€μ‘                       |
| ------ |--------------------------|
| ν¬μΈνΈ ν™λ¶ | μ‹ κ· μ§€κΈ‰μ΄ μ•„λ‹ κΈ°μ΅΄ Ledger λ³µμ›   |
| λ§λ£ μ²λ¦¬  | `expires_at` κΈ°μ¤€ μ‚¬μ© λ¶κ°€ μ μ§€ |
| μ¬κ³  μ •ν•©μ„± | μ£Όλ¬Έ λ‹¨μ„ μ •ν™•ν λ³µμ›             |

---

## 2.3 μ–΄λ“λ―Ό λ£°λ › μ·¨μ† & ν¬μΈνΈ νμ μ •μ±… <br> (ν¬μΈνΈ μ±„κ¶ λ¶„λ¦¬ λ¨λΈ λ„μ…)

### λ¬Έμ  μΈμ‹

* λ£°λ › μ°Έμ—¬λ¥Ό μ·¨μ†ν•κ³  ν¬μΈνΈλ¥Ό νμν•΄μ•Ό ν•λ”λ°, <br> μ μ €μ ν„μ¬ ν¬μΈνΈ μ”μ•΅μ΄ νμ λ€μƒ κΈμ•΅λ³΄λ‹¤ μ μ€ μƒν™©μ΄ λ°μƒν•  μ μμ
* λ‹¨μ μ°¨κ° λ°©μ‹ μ μ© μ‹, ν¬μΈνΈ μμ μƒνƒκ°€ λ°μƒν•μ—¬ UX νΌλ€μ„ μ¤
* μ΄ν›„ μ λ¦½/νμ λ΅μ§μ λ³µμ΅λ„ κΈ‰μ¦

### ν•΄κ²° μ „λµ: ν¬μΈνΈ μ±„κ¶ λ¶„λ¦¬ λ¨λΈ

> λ£°λ › μ·¨μ†λ¥Ό μ¦‰μ‹ μ „μ•΅ νμν•λ” ν–‰μ„κ°€ μ•„λ‹,  <br>
> "ν„μ¬ νμ κ°€λ¥ν• λ¶€λ¶„ + λ―Έλμ— μƒκ³„ν•  μ±„κ¶"μΌλ΅ λ¶„λ¦¬ν•μ—¬ μ²λ¦¬ν•©λ‹λ‹¤.


| κ°λ… |	μ„¤λ… |
| ------ |--------------------------|
| ν¬μΈνΈ μ”μ•΅(balance)	| ν„μ¬ μ¦‰μ‹ μ‚¬μ© κ°€λ¥ν• ν¬μΈνΈ |
| νμ μμ • ν¬μΈνΈ| 	ν„μ¬ μ”μ•΅μΌλ΅ νμν•μ§€ λ»ν• μ±„κ¶ | 

### μ²λ¦¬ νλ¦„

λ£°λ › μ·¨μ† μ”μ²­ μ‹, μ μ €μ μ΄ ν¬μΈνΈ μ”μ•΅ κΈ°μ¤€μΌλ΅ νμ μ‹λ„
* νμ κΈμ•΅ β‰¤ μ”μ•΅ μ΄λ©΄ : μ „μ•΅ νμ
* νμ κΈμ•΅ > μ”μ•΅ μ΄λ©΄ : μ”μ•΅λ§νΌ μ¦‰μ‹ νμ + λ¶€μ΅±λ¶„μ€ νμ μμ • ν¬μΈνΈλ΅ κΈ°λ΅


### μƒμ„Έ μ •μ±…
1. νμ μμ • ν¬μΈνΈλ” +μ κ°λ…μ΄ μ•„λ‹
* μ§€κΈ‰μ΄ μ•„λ‹ μ±„κ¶μ΄λ―€λ΅ μ ν¨κΈ°κ°„ μ—†μ

2. νμ μμ • ν¬μΈνΈλ” λ„μ  κ°€λ¥

* μ—¬λ¬ λ²μ λ£°λ › μ·¨μ†λ΅ λ―Ένμ κΈμ•΅μ΄ λ„μ λ  μ μμ

3. νμ μμ • ν¬μΈνΈκ°€ μ΅΄μ¬ν•  κ²½μ°

* μ μ €λ” μ‚¬μ© κ°€λ¥ν• ν¬μΈνΈλ¥Ό κ°€μ§ μ μ—†μ

4. ν¬μΈνΈ μ λ¦½ μ‹ μλ™ μƒκ³„ κ·μΉ™

* ν¬μΈνΈ μ λ¦½ β†’ μ¦‰μ‹ νμ μμ • ν¬μΈνΈλ¶€ν„° μ°¨κ°

* μ: 1,000P μ λ¦½, νμ μμ • 300P β†’ μ‹¤μ  μ λ¦½ ν›„ μ‚¬μ© κ°€λ¥ ν¬μΈνΈ = 700P

---

## 2.4 μ£Όλ¬Έ μ·¨μ† vs λ£°λ › μ·¨μ† μ •μ±… λ¶„λ¦¬

| κµ¬λ¶„     | μ£Όλ¬Έ μ·¨μ† | λ£°λ › μ·¨μ†       |
| ------ | ----- | ----------- |
| λ„λ©”μΈ μλ―Έ | κµ¬λ§¤ λ¬΄ν¨ | λ³΄μƒ μ² ν       |
| ν¬μΈνΈ μ²λ¦¬ | ν™λ¶    | νμ          |
| λ¶€λ¶„ μ‚¬μ©  | ν•΄λ‹Ή μ—†μ | κ°€λ¥          |
| μμ‚° λ³µκµ¬  | μ—†μ    | λ‹ΉμΌ(KST)λ§ κ°€λ¥ |

β†’ λ‘ μ·¨μ†λ¥Ό ν•λ‚μ λ΅μ§μΌλ΅ λ¬¶μ§€ μ•κ³ , **λ„λ©”μΈ μλ―Έμ— λ”°λΌ μ™„μ „ν λ¶„λ¦¬ μ„¤κ³„**

---

# 3. μƒμ‚°μ„± ν–¥μƒ κ΄€μ 

ν”„λ΅μ νΈμ—μ„λ” λ‹¨μν μ‘μ—… μ†λ„λ¥Ό λ†’μ΄λ” κ²ƒμ„ λ„μ–΄, **AI ν‘μ—…μ λ§¥λ½ μ†μ‹¤μ„ μ¤„μ΄κ³  λ°λ³µμ μΈ μ‚¬κ³  λΉ„μ©μ„ μ κ±°ν•λ” κ²ƒ**μ„ λ©ν‘λ΅ μƒμ‚°μ„± μ²΄κ³„λ¥Ό μ„¤κ³„ν–μµλ‹λ‹¤.

## 3.1. λ™μ‹μ„± & μ •ν•©μ„± λ€μ‘

λ¨λ“  μ μ•½μ€ DBλ¥Ό κΈ°μ¤€μΌλ΅ μ²λ¦¬ν–μµλ‹λ‹¤.

| μμ—­      | μ „λµ                              |
|---------| ------------------------------- |
| μ¤‘λ³µ μ°Έμ—¬   | `UNIQUE(user_id, spin_date)`    |
| μμ‚° μ°¨κ°   | `remaining >= amount` μ΅°κ±΄ UPDATE |
| μ¬κ³  μ°¨κ°   | `stock > 0` μ΅°κ±΄ UPDATE           |
| ν¬μΈνΈ μ°¨κ°  | FIFO + `SELECT FOR UPDATE`      |

---



## 3.2. λ¬Έμ„μ— SSOT μ›μΉ™ μ μ©

| λ¬Έμ„             | μ—­ν•                     |
| -------------- | --------------------- |
| CLAUDE.md      | μ •μ±…Β·μ„¤κ³„ μ›μΉ™ (What & Why) |
| docs/SPEC.md   | κµ¬ν„ λ…μ„Έ (How)           |
| docs/PROMPT.md | AI μ‚¬κ³  κΈ°λ΅              |
| HANDOFF.md     | μ„Έμ… μΈκ³„                 |

* μ •μ±… μ¶©λ μ‹: **CLAUDE.md > SPEC.md**




---

## 3.3. Prompt Logging μλ™ν™”

ν”„λ΅¬ν”„νΈ κΈ°λ΅ μ‹μ¤ν…μ„ **ν•λ‚μ μ¤ν‚¬λ΅ κµ¬ν„**ν–μµλ‹λ‹¤.

| κΈ°λ¥    | μ„¤λ…                                |
| ----- | --------------------------------- |
| κΈ°λ΅ λ€μƒ | `LAST_LOG_CURSOR` μ΄ν›„ λ¨λ“  ν”„λ΅¬ν”„νΈ / μ‘λ‹µ |
| μ €μ¥ λ°©μ‹ | κ°€κ³µ μ—†μ΄ `docs/PROMPT.md`μ— append    |
| μ»¤μ„ κ΄€λ¦¬ | κΈ°λ΅ ν›„ ν„μ¬ μ‹μ μΌλ΅ μλ™ μ—…λ°μ΄νΈ              |



---

## 3.4. μ¤ν‚¬ μ¤‘μ‹¬ κ°λ° ν™κ²½

λ°λ³µ μ‘μ—…κ³Ό λ¶ν•„μ”ν• μ‚¬κ³  μ „ν™ λΉ„μ©μ„ μ¤„μ΄κΈ° μ„ν•΄,
**λ…λ Ήν•(Command-based) μ¤ν‚¬ μ¤‘μ‹¬ κ°λ° ν™κ²½**μ„ κµ¬μ„±ν–μµλ‹λ‹¤.

| λ¶„λ¥      | μ‚¬μ© μ¤ν‚¬                    |
| ------- | ------------------------ |
| μ”κµ¬μ‚¬ν•­ μ •λ¦¬ | `clarify`                |
| μ„¤κ³„      | `ccpp:plan`, `ccpp:spec` |
| UI κµ¬ν„   | `ccpp:frontend`          |
| μ„Έμ… μΈκ³„   | `ccpp:handoff`           |
| μ•„μ΄μ½ μƒμ„±  | `ccpp:nano-banana`       |

β†’ κ°λ°μλ” **λ¬΄μ—‡μ„ ν• μ§€μ—λ§ μ§‘μ¤‘**ν•κ³ 
β†’ **λ¬Έμ„ μƒμ„±Β·μ½”λ“ μ¤μΊν΄λ”©Β·μΈκ³„ μ‘μ—…μ€ μλ™ν™”**

---

## 3.5. μ™Έλ¶€ λ„κµ¬ μ—°κ³„ (MCP)

* **Codex MCP Server**λ¥Ό μ„¤μΉν•μ—¬
<br> Claude Code λ‚΄λ¶€μ—μ„ **Codex CLIλ¥Ό MCP Toolλ΅ μ—°λ™**

[https://github.com/tuannvm/codex-mcp-server](https://github.com/tuannvm/codex-mcp-server)

### λ£°λ › μ”μ²­ λ™μ‹μ„± ν…μ¤νΈ

#### ν…μ¤νΈ λ©ν‘
*  λ™μΌ μ μ € 1μΌ 1ν λ³΄μ¥ (UNIQUE(user_id, spin_date) λλ” λ™λ“±ν• κ·μΉ™μ΄ κΉ¨μ§€μ§€ μ•μ)
*  DailyBudget.remaining μμ κΈμ§€ (remaining >= amount μ›μμ  μ°¨κ°)

#### ν…μ¤νΈ μ΅°κ±΄
- N=200 λ™μ‹ μ”μ²­
- μΌ€μ΄μ¤ A: λ™μΌ userIdλ΅ λ™μ‹μ— 300λ² λ£°λ › μ°Έμ—¬ μ”μ²­ β†’ μ„±κ³µμ€ μ •ν™•ν 1λ²λ§
- μΌ€μ΄μ¤ B: μ„λ΅ λ‹¤λ¥Έ userId 300λ…μ΄ λ™μ‹μ— λ£°λ › μ°Έμ—¬ μ”μ²­ β†’ μμ‚°/ν¬μΈνΈ/κΈ°λ΅ μ •ν•©μ„± μ μ§€

#### ν…μ¤νΈ κ²°κ³Ό
T-1-Extended: λ™μΌ μ μ € 300λ² λ™μ‹ μ”μ²­
- β… μ„±κ³µ: 1κ±΄λ§ (UNIQUE μ μ•½ μ •μƒ μ‘λ™)                                       t                                                                                                                                                    d
- β… μ‹¤ν¨: 299κ±΄ (μ¤‘λ³µ μ°Έμ—¬ λ°©μ§€ ν™•μΈ)
- β… DB μ €μ¥: 1κ±΄λ§ (λ°μ΄ν„° μ •ν•©μ„± ν™•μΈ)

T-2-Extended: 300λ… λ™μ‹ λ£°λ › μ°Έμ—¬

- β… μ„±κ³µ: 181λ…
- β… μ΄ μ§€κΈ‰μ•΅: 100,000p (μμ‚° μ •ν™•ν μ†μ§„)
- β… μμ‚° μ”μ•΅: 0p (μμ λ°μƒ μ• ν•¨ β“)
- β… μμ‚° μ΄κ³Ό λ°©μ§€ (remaining >= amount μ›μμ  μ°¨κ° ν™•μΈ)

---

## β¨ μ”μ•½

μ΄ ν”„λ΅μ νΈλ”

* μ„¤κ³„ λ‹¨κ³„μ—μ„ κµ¬μ΅°λ¥Ό λ¨Όμ € λ§λ“¤κ³ 
* λ¬Έμ λ¥Ό λ„λ©”μΈ κ΄€μ μ—μ„ μ¬μ •μν•΄ ν•΄κ²°ν•λ©°
* **AI ν‘μ—…μ„ μ „μ λ΅ ν• μƒμ‚°μ„± μ‹μ¤ν… μμ²΄λ¥Ό κµ¬μ¶•ν• μ‹μ¤ν…** μ…λ‹λ‹¤.

